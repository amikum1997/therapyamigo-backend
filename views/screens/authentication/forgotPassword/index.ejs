<script>
  document.title = "TherapyAmigo | Forgot Password"
</script>

<div class="container-xxl">
    <div class="authentication-wrapper authentication-basic container-p-y">
      <div class="authentication-inner py-4">
        <!-- Forgot Password -->
        <div class="card">
          <div class="card-body">
            <!-- Logo -->
            <div class="app-brand justify-content-center">
              <a href="<%- process.env.BASEURL %>" class="app-brand-link gap-2">
                <span class="app-brand-logo demo">
                  <img src="<%- process.env.BASEURL %>img/brandLogo.svg" alt="">
                </span>
              </a>
            </div>
            <!-- /Logo -->
            <h4 class="mb-2">Forgot Password? ðŸ”’</h4>
            <p class="mb-4">Enter your email and we'll send you instructions to reset your password</p>
            <form id="formAuthentication" class="mb-3" >
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input
                  type="text"
                  class="form-control"
                  id="email"
                  name="email"
                  placeholder="Enter your email"
                  autofocus
                />
                <p class="errorMsg" id="invalidEmail">Invalid Email Address</p>
              </div>
              <button class="btn btn-primary d-grid w-100" type="submit">Send Reset Link</button>
            </form>
            <div class="text-center">
              <a href="<%- process.env.BASEURL %>login" class="d-flex align-items-center justify-content-center">
                <i class="bx bx-chevron-left scaleX-n1-rtl bx-sm"></i>
                Back to login
              </a>
            </div>
          </div>
        </div>
        <!-- /Forgot Password -->
      </div>
    </div>
  </div>

  <script>
    $('#invalidEmail').css('display', 'none');
    // FORM VALIDATION VARIABLE
    let isEmailValid = false;
    // FORM DATA
    let email;
    $('#email').on('input', function (evt) {
        let regex = new RegExp(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g);
        if (regex.test(evt.target.value)) {
            $('#invalidEmail').css('display', 'none');
            isEmailValid = true
        } else {
            $('#invalidEmail').css('display', "block")
            isEmailValid = false
        }
        email = evt.target.value
    })
  
    $('#formAuthentication').submit(function (e) {
        e.preventDefault();
        if (isEmailValid) {
            console.log("ALL VALID", email);
            window.location.href = '<%= process.env.BASEURL %>reset-password'
        }
    })
</script>